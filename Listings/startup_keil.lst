


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             STARTUP, CODE, READONLY
    2 00000000                 ARM
    3 00000000                 CODE32
    4 00000000                 PRESERVE8
    5 00000000         
    6 00000000         ; ======================================================
                       ==
    7 00000000         ; NAND Boot + SDRAM Init + Vector Table at 0x00000000
    8 00000000         ; Target: mini2440 (S3C2440) - Hardware Mode
    9 00000000         ; Stack: 0x33FF0000 based layout
   10 00000000         ; ======================================================
                       ==
   11 00000000         
   12 00000000                 EXPORT           _start
   13 00000000                 EXPORT           Reset_Handler
   14 00000000         
   15 00000000                 IMPORT           main
   16 00000000                 IMPORT           OSTickISR
   17 00000000                 IMPORT           OSStartHighRdy
   18 00000000         
   19 00000000         ; ======================================================
                       ==
   20 00000000         ; Register Definitions
   21 00000000         ; ======================================================
                       ==
   22 00000000 53000000 
                       WTCON   EQU              0x53000000
   23 00000000 48000000 
                       BWSCON  EQU              0x48000000
   24 00000000 4800001C 
                       BANKCON6
                               EQU              0x4800001C
   25 00000000 48000024 
                       REFRESH EQU              0x48000024
   26 00000000 48000028 
                       BANKSIZE
                               EQU              0x48000028
   27 00000000 4800002C 
                       MRSRB6  EQU              0x4800002C
   28 00000000 4C000000 
                       LOCKTIME
                               EQU              0x4C000000
   29 00000000 4C000004 
                       MPLLCON EQU              0x4C000004
   30 00000000 4C000008 
                       UPLLCON EQU              0x4C000008
   31 00000000 4C00000C 
                       CLKCON  EQU              0x4C00000C
   32 00000000 4C000014 
                       CLKDIVN EQU              0x4C000014
   33 00000000 4A000008 
                       INTMSK  EQU              0x4A000008
   34 00000000         
   35 00000000         ; ======================================================
                       ==
   36 00000000         ; Exception Vector Table
   37 00000000         ; ======================================================
                       ==
   38 00000000         _start



ARM Macro Assembler    Page 2 


   39 00000000 EAFFFFFE        B                Reset_Handler
   40 00000004 EA000005        B                Undefined_Handler
   41 00000008 EA000005        B                SWI_Handler
   42 0000000C EA000005        B                Prefetch_Handler
   43 00000010 EA000005        B                Abort_Handler
   44 00000014 EAFFFFFE        B                .
   45 00000018 EA000005        B                IRQ_Handler
   46 0000001C EA000003        B                FIQ_Handler
   47 00000020         
   48 00000020         Undefined_Handler
   49 00000020 EAFFFFFE        B                Undefined_Handler
   50 00000024         SWI_Handler
   51 00000024 EAFFFFFE        B                SWI_Handler
   52 00000028         Prefetch_Handler
   53 00000028 EAFFFFFE        B                Prefetch_Handler
   54 0000002C         Abort_Handler
   55 0000002C EAFFFFFE        B                Abort_Handler
   56 00000030         FIQ_Handler
   57 00000030 EAFFFFFE        B                FIQ_Handler
   58 00000034         
   59 00000034         IRQ_Handler
   60 00000034 EAFFFFFE        B                OSTickISR
   61 00000038         
   62 00000038         ; ======================================================
                       ==
   63 00000038         ; Reset Handler (Hardware Mode)
   64 00000038         ; ======================================================
                       ==
   65 00000038         Reset_Handler
   66 00000038         
   67 00000038         ; Disable Watchdog
   68 00000038 E3A00453        LDR              r0, =WTCON
   69 0000003C E3A01000        MOV              r1, #0
   70 00000040 E5801000        STR              r1, [r0]
   71 00000044         
   72 00000044         ; Disable All Interrupts
   73 00000044 E59F014C        LDR              r0, =INTMSK
   74 00000048 E3E01000        LDR              r1, =0xFFFFFFFF
   75 0000004C E5801000        STR              r1, [r0]
   76 00000050         
   77 00000050         ; Install Vector Table at 0x00000000
   78 00000050 E3A00000        LDR              r0, =0x00000000
   79 00000054 E59F1140        LDR              r1, =0xE59FF018
   80 00000058 E3A02008        MOV              r2, #8
   81 0000005C         VecLoop
   82 0000005C E4801004        STR              r1, [r0], #4
   83 00000060 E2522001        SUBS             r2, r2, #1
   84 00000064 CAFFFFFC        BGT              VecLoop
   85 00000068         
   86 00000068 E3A00020        LDR              r0, =0x00000020
   87 0000006C E59F112C        LDR              r1, =Reset_Handler
   88 00000070 E4801004        STR              r1, [r0], #4
   89 00000074 E59F1128        LDR              r1, =Undefined_Handler
   90 00000078 E4801004        STR              r1, [r0], #4
   91 0000007C E59F1124        LDR              r1, =SWI_Handler
   92 00000080 E4801004        STR              r1, [r0], #4
   93 00000084 E59F1120        LDR              r1, =Prefetch_Handler
   94 00000088 E4801004        STR              r1, [r0], #4
   95 0000008C E59F111C        LDR              r1, =Abort_Handler



ARM Macro Assembler    Page 3 


   96 00000090 E4801004        STR              r1, [r0], #4
   97 00000094 E59F1118        LDR              r1, =IRQ_Handler
   98 00000098 E4801004        STR              r1, [r0], #4
   99 0000009C E59F1114        LDR              r1, =FIQ_Handler
  100 000000A0 E4801004        STR              r1, [r0], #4
  101 000000A4         
  102 000000A4         ; Disable CP15 Cache/TLB
  103 000000A4 EE110F10        MRC              p15, 0, r0, c1, c0, 0
  104 000000A8 E3C00A01        BIC              r0, r0, #(1<<12)
  105 000000AC E3C00004        BIC              r0, r0, #(1<<2)
  106 000000B0 E3C00001        BIC              r0, r0, #(1<<0)
  107 000000B4 EE010F10        MCR              p15, 0, r0, c1, c0, 0
  108 000000B8 E3A00000        MOV              r0, #0
  109 000000BC EE080F17        MCR              p15, 0, r0, c8, c7, 0
  110 000000C0         
  111 000000C0         ; ======================================================
                       ==
  112 000000C0         ; Clock Configuration
  113 000000C0         ; ======================================================
                       ==
  114 000000C0 E3A00313        LDR              r0, =LOCKTIME
  115 000000C4 E3E01000        LDR              r1, =0xFFFFFFFF
  116 000000C8 E5801000        STR              r1, [r0]
  117 000000CC         
  118 000000CC E59F00E8        LDR              r0, =CLKDIVN
  119 000000D0 E3A01005        MOV              r1, #5
  120 000000D4 E5801000        STR              r1, [r0]
  121 000000D8         
  122 000000D8 E59F00E0        LDR              r0, =UPLLCON
  123 000000DC E59F10E0        LDR              r1, =((56<<12)+(2<<4)+2)
  124 000000E0 E5801000        STR              r1, [r0]
  125 000000E4         
  126 000000E4 E1A00000        NOP
  127 000000E8 E1A00000        NOP
  128 000000EC E1A00000        NOP
  129 000000F0 E1A00000        NOP
  130 000000F4 E1A00000        NOP
  131 000000F8 E1A00000        NOP
  132 000000FC E1A00000        NOP
  133 00000100         
  134 00000100 E59F00C0        LDR              r0, =MPLLCON
  135 00000104 E59F10C0        LDR              r1, =((127<<12)+(2<<4)+1)
  136 00000108 E5801000        STR              r1, [r0]
  137 0000010C         
  138 0000010C         ; ======================================================
                       ==
  139 0000010C         ; SDRAM Initialization
  140 0000010C         ; ======================================================
                       ==
  141 0000010C E3A00312        LDR              r0, =BWSCON
  142 00000110 E3A01422        LDR              r1, =0x22000000
  143 00000114 E5801000        STR              r1, [r0]
  144 00000118         
  145 00000118 E59F00B0        LDR              r0, =BANKCON6
  146 0000011C E59F10B0        LDR              r1, =0x18001
  147 00000120 E5801000        STR              r1, [r0]
  148 00000124         
  149 00000124 E59F00AC        LDR              r0, =BANKSIZE
  150 00000128 E3A010B1        LDR              r1, =0xB1



ARM Macro Assembler    Page 4 


  151 0000012C E5801000        STR              r1, [r0]
  152 00000130         
  153 00000130 E59F00A4        LDR              r0, =REFRESH
  154 00000134 E59F10A4        LDR              r1, =0x8404F5
  155 00000138 E5801000        STR              r1, [r0]
  156 0000013C         
  157 0000013C E59F00A0        LDR              r0, =MRSRB6
  158 00000140 E3A01020        LDR              r1, =0x20
  159 00000144 E5801000        STR              r1, [r0]
  160 00000148         
  161 00000148         ; ======================================================
                       ==
  162 00000148         ; Check if copy needed: NAND -> SDRAM
  163 00000148         ; ======================================================
                       ==
  164 00000148 E1A0000F        MOV              r0, pc
  165 0000014C E3A01203        LDR              r1, =0x30000000
  166 00000150 E1500001        CMP              r0, r1
  167 00000154 2A000008        BHS              CodeInSDRAM
  168 00000158         
  169 00000158         ; Copy code
  170 00000158 E59F0088        LDR              r0, =_start
  171 0000015C E3A01203        LDR              r1, =0x30000000
  172 00000160 E59F2084        LDR              r2, =Image_End
  173 00000164 E0422000        SUB              r2, r2, r0
  174 00000168         
  175 00000168         CopyLoop
  176 00000168 E4903004        LDR              r3, [r0], #4
  177 0000016C E4813004        STR              r3, [r1], #4
  178 00000170 E2522004        SUBS             r2, r2, #4
  179 00000174 CAFFFFFB        BGT              CopyLoop
  180 00000178         
  181 00000178 E59FF070        LDR              pc, =CodeInSDRAM
  182 0000017C         
  183 0000017C         ; ======================================================
                       ==
  184 0000017C         ; Continue in SDRAM
  185 0000017C         ; ======================================================
                       ==
  186 0000017C         CodeInSDRAM
  187 0000017C         
  188 0000017C 33FF0000 
                       STACK_BASE
                               EQU              0x33FF0000
  189 0000017C 33FEEC00 
                       SVCStack
                               EQU              0x33FEEC00
  190 0000017C 00000010 
                       USERMODE
                               EQU              0x10
  191 0000017C 00000013 
                       SVCMODE EQU              0x13
  192 0000017C 0000001F 
                       MODEMASK
                               EQU              0x1F
  193 0000017C         
  194 0000017C E10F0000        MRS              r0, cpsr
  195 00000180 E3C0001F        BIC              r0, r0, #MODEMASK
  196 00000184 E3800013        ORR              r0, r0, #SVCMODE



ARM Macro Assembler    Page 5 


  197 00000188 E121F000        MSR              cpsr_c, r0
  198 0000018C E59FD060        LDR              sp, =SVCStack
  199 00000190         
  200 00000190 EBFFFFFE        BL               main
  201 00000194         
  202 00000194         Stop
  203 00000194 EAFFFFFE        B                Stop
  204 00000198         
  205 00000198         Image_End
  206 00000198                 END
              4A000008 
              E59FF018 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              4C000014 
              4C000008 
              00038022 
              4C000004 
              0007F021 
              4800001C 
              00018001 
              48000028 
              48000024 
              008404F5 
              4800002C 
              00000000 
              00000000 
              00000000 
              33FEEC00 
Command Line: --debug --xref --diag_suppress=9931 --cpu=ARM920T --apcs=interwor
k --depend=.\objects\startup_keil.d -o.\objects\startup_keil.o -I.\drivers -I.\
include -I.\kernel -I.\lib -I.\user -I".\arch copy" -IE:\Keil_v5\ARM\RV31\INC -
IE:\Keil_v5\ARM\INC\Samsung --predefine="__UVISION_VERSION SETA 538" --list=.\l
istings\startup_keil.lst "arch copy\startup_keil.S"



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Abort_Handler 0000002C

Symbol: Abort_Handler
   Definitions
      At line 54 in file arch
   Uses
      At line 43 in file arch
      At line 55 in file arch
      At line 95 in file arch

CodeInSDRAM 0000017C

Symbol: CodeInSDRAM
   Definitions
      At line 186 in file arch
   Uses
      At line 167 in file arch
      At line 181 in file arch

CopyLoop 00000168

Symbol: CopyLoop
   Definitions
      At line 175 in file arch
   Uses
      At line 179 in file arch
Comment: CopyLoop used once
FIQ_Handler 00000030

Symbol: FIQ_Handler
   Definitions
      At line 56 in file arch
   Uses
      At line 46 in file arch
      At line 57 in file arch
      At line 99 in file arch

IRQ_Handler 00000034

Symbol: IRQ_Handler
   Definitions
      At line 59 in file arch
   Uses
      At line 45 in file arch
      At line 97 in file arch

Image_End 00000198

Symbol: Image_End
   Definitions
      At line 205 in file arch
   Uses
      At line 172 in file arch
Comment: Image_End used once
Prefetch_Handler 00000028

Symbol: Prefetch_Handler
   Definitions
      At line 52 in file arch



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Uses
      At line 42 in file arch
      At line 53 in file arch
      At line 93 in file arch

Reset_Handler 00000038

Symbol: Reset_Handler
   Definitions
      At line 65 in file arch
   Uses
      At line 13 in file arch
      At line 39 in file arch
      At line 87 in file arch

STARTUP 00000000

Symbol: STARTUP
   Definitions
      At line 1 in file arch
   Uses
      None
Comment: STARTUP unused
SWI_Handler 00000024

Symbol: SWI_Handler
   Definitions
      At line 50 in file arch
   Uses
      At line 41 in file arch
      At line 51 in file arch
      At line 91 in file arch

Stop 00000194

Symbol: Stop
   Definitions
      At line 202 in file arch
   Uses
      At line 203 in file arch
Comment: Stop used once
Undefined_Handler 00000020

Symbol: Undefined_Handler
   Definitions
      At line 48 in file arch
   Uses
      At line 40 in file arch
      At line 49 in file arch
      At line 89 in file arch

VecLoop 0000005C

Symbol: VecLoop
   Definitions
      At line 81 in file arch
   Uses
      At line 84 in file arch
Comment: VecLoop used once



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

_start 00000000

Symbol: _start
   Definitions
      At line 38 in file arch
   Uses
      At line 12 in file arch
      At line 170 in file arch

14 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

BANKCON6 4800001C

Symbol: BANKCON6
   Definitions
      At line 24 in file arch
   Uses
      At line 145 in file arch
Comment: BANKCON6 used once
BANKSIZE 48000028

Symbol: BANKSIZE
   Definitions
      At line 26 in file arch
   Uses
      At line 149 in file arch
Comment: BANKSIZE used once
BWSCON 48000000

Symbol: BWSCON
   Definitions
      At line 23 in file arch
   Uses
      At line 141 in file arch
Comment: BWSCON used once
CLKCON 4C00000C

Symbol: CLKCON
   Definitions
      At line 31 in file arch
   Uses
      None
Comment: CLKCON unused
CLKDIVN 4C000014

Symbol: CLKDIVN
   Definitions
      At line 32 in file arch
   Uses
      At line 118 in file arch
Comment: CLKDIVN used once
INTMSK 4A000008

Symbol: INTMSK
   Definitions
      At line 33 in file arch
   Uses
      At line 73 in file arch
Comment: INTMSK used once
LOCKTIME 4C000000

Symbol: LOCKTIME
   Definitions
      At line 28 in file arch
   Uses
      At line 114 in file arch
Comment: LOCKTIME used once
MODEMASK 0000001F

Symbol: MODEMASK



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 192 in file arch
   Uses
      At line 195 in file arch
Comment: MODEMASK used once
MPLLCON 4C000004

Symbol: MPLLCON
   Definitions
      At line 29 in file arch
   Uses
      At line 134 in file arch
Comment: MPLLCON used once
MRSRB6 4800002C

Symbol: MRSRB6
   Definitions
      At line 27 in file arch
   Uses
      At line 157 in file arch
Comment: MRSRB6 used once
REFRESH 48000024

Symbol: REFRESH
   Definitions
      At line 25 in file arch
   Uses
      At line 153 in file arch
Comment: REFRESH used once
STACK_BASE 33FF0000

Symbol: STACK_BASE
   Definitions
      At line 188 in file arch
   Uses
      None
Comment: STACK_BASE unused
SVCMODE 00000013

Symbol: SVCMODE
   Definitions
      At line 191 in file arch
   Uses
      At line 196 in file arch
Comment: SVCMODE used once
SVCStack 33FEEC00

Symbol: SVCStack
   Definitions
      At line 189 in file arch
   Uses
      At line 198 in file arch
Comment: SVCStack used once
UPLLCON 4C000008

Symbol: UPLLCON
   Definitions
      At line 30 in file arch
   Uses



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      At line 122 in file arch
Comment: UPLLCON used once
USERMODE 00000010

Symbol: USERMODE
   Definitions
      At line 190 in file arch
   Uses
      None
Comment: USERMODE unused
WTCON 53000000

Symbol: WTCON
   Definitions
      At line 22 in file arch
   Uses
      At line 68 in file arch
Comment: WTCON used once
17 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

OSStartHighRdy 00000000

Symbol: OSStartHighRdy
   Definitions
      At line 17 in file arch
   Uses
      None
Comment: OSStartHighRdy unused
OSTickISR 00000000

Symbol: OSTickISR
   Definitions
      At line 16 in file arch
   Uses
      At line 60 in file arch
Comment: OSTickISR used once
main 00000000

Symbol: main
   Definitions
      At line 15 in file arch
   Uses
      At line 200 in file arch
Comment: main used once
3 symbols
367 symbols in table
